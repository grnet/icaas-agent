# icaas - Image Creator as a Service

description "ICaaS agent"

start on runlevel [2345]
stop on runlevel [!2345]

umask 022

env ICAAS_MONITOR_SIGSTOP=1
expect stop

pre-start script
    test -f /.icaas || { stop; exit 0; }
    test -f /etc/icaas/manifest.cfg || { stop; exit 1; }
end script

exec /usr/bin/icaas -m /etc/icaas/manifest.cfg

post-stop script
    rm -f /.icaas
end script

# vim: set sta sts=4 shiftwidth=4 sw=4 et ai syntax=upstart:
